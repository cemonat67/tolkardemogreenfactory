# TOLKAR Zero@Factory - Environment Configuration
# Production Intelligence Platform for Smartex Machines
# Phase 9.5 - Production Ready

# =============================================================================
# APPLICATION SETTINGS
# =============================================================================

# Environment (development, staging, production)
ENVIRONMENT=development

# Application name and version
APP_NAME="TOLKAR Zero@Factory"
APP_VERSION=2.0.0
APP_DESCRIPTION="Production Intelligence Platform for Smartex Industrial Washing Machines"

# Server configuration
HOST=0.0.0.0
PORT=5000
RELOAD=true  # Set to false in production

# =============================================================================
# DATABASE CONFIGURATION
# =============================================================================

# Database URL - SQLite for development, PostgreSQL for production
# SQLite (development)
DATABASE_URL=sqlite:///./tolkar_factory.db

# PostgreSQL (production) - uncomment and configure for production
# DATABASE_URL=postgresql://username:password@localhost:5432/tolkar_factory

# MySQL (alternative) - uncomment and configure if preferred
# DATABASE_URL=mysql+mysqlconnector://username:password@localhost:3306/tolkar_factory

# Database connection pool settings
DB_POOL_SIZE=10
DB_MAX_OVERFLOW=20
DB_POOL_TIMEOUT=30
DB_POOL_RECYCLE=3600

# =============================================================================
# SECURITY SETTINGS
# =============================================================================

# JWT Secret Key - CHANGE THIS IN PRODUCTION!
# Generate a strong secret key using: openssl rand -hex 32
SECRET_KEY=your-super-secret-jwt-key-change-this-in-production-32-characters-min

# JWT Configuration
JWT_ALGORITHM=HS256
JWT_EXPIRATION_MINUTES=480  # 8 hours
JWT_ISSUER=TOLKAR-ZeroFactory
JWT_AUDIENCE=tolkar-factory-users

# Password hashing rounds (bcrypt)
BCRYPT_ROUNDS=12

# CORS settings
CORS_ALLOW_ORIGINS=*  # Configure appropriately for production
CORS_ALLOW_CREDENTIALS=true
CORS_ALLOW_METHODS=*
CORS_ALLOW_HEADERS=*
CORS_MAX_AGE=86400

# =============================================================================
# LOGGING CONFIGURATION
# =============================================================================

# Logging level (DEBUG, INFO, WARNING, ERROR, CRITICAL)
LOG_LEVEL=INFO

# Log format
LOG_FORMAT=json  # json or text

# Log file paths
LOG_FILE_PATH=logs/tolkar-factory.log
LOG_FILE_MAX_BYTES=10485760  # 10MB
LOG_FILE_BACKUP_COUNT=5

# Enable request/response logging
LOG_REQUESTS=true
LOG_RESPONSES=true
LOG_SQL_QUERIES=false  # Set to true for SQL debugging

# =============================================================================
# MONITORING & ALERTING
# =============================================================================

# Health check configuration
HEALTH_CHECK_ENABLED=true
HEALTH_CHECK_INTERVAL=30

# Prometheus metrics
PROMETHEUS_ENABLED=false
PROMETHEUS_PORT=9090

# Sentry error tracking (optional)
SENTRY_DSN=
SENTRY_ENVIRONMENT=development

# =============================================================================
# FEATURE FLAGS
# =============================================================================

# Enable/disable features
FEATURE_AUTHENTICATION=true
FEATURE_TELEMETRY=true
FEATURE_AUDIT_LOGGING=true
FEATURE_MAINTENANCE_LOGS=true
FEATURE_REAL_TIME_UPDATES=false  # WebSocket support (future)
FEATURE_EMAIL_NOTIFICATIONS=false  # Future enhancement
FEATURE_SMS_NOTIFICATIONS=false  # Future enhancement

# =============================================================================
# PRODUCTION SETTINGS
# =============================================================================

# Production-specific settings (only active when ENVIRONMENT=production)
PRODUCTION_SSL_ENABLED=true
PRODUCTION_HTTPS_ONLY=true
PRODUCTION_SECURITY_HEADERS=true
PRODUCTION_RATE_LIMITING=true
PRODUCTION_COMPRESSION=true

# Gunicorn worker configuration (production)
GUNICORN_WORKERS=4
GUNICORN_WORKER_CLASS=uvicorn.workers.UvicornWorker
GUNICORN_WORKER_CONNECTIONS=1000
GUNICORN_MAX_REQUESTS=1000
GUNICORN_MAX_REQUESTS_JITTER=50
GUNICORN_TIMEOUT=30
GUNICORN_KEEPALIVE=2

# =============================================================================
# EMAIL CONFIGURATION (Future Enhancement)
# =============================================================================

# SMTP settings
SMTP_SERVER=
SMTP_PORT=587
SMTP_USERNAME=
SMTP_PASSWORD=
SMTP_USE_TLS=true
SMTP_FROM_EMAIL=noreply@tolkar.com
SMTP_FROM_NAME="TOLKAR Zero@Factory"

# =============================================================================
# REDIS CONFIGURATION (Future Enhancement)
# =============================================================================

# Redis for caching and real-time features
REDIS_URL=redis://localhost:6379/0
REDIS_PASSWORD=
REDIS_DB=0
REDIS_SOCKET_TIMEOUT=5
REDIS_SOCKET_CONNECT_TIMEOUT=5
REDIS_RETRY_ON_TIMEOUT=true

# =============================================================================
# FILE STORAGE CONFIGURATION
# =============================================================================

# File upload settings
MAX_FILE_SIZE=10485760  # 10MB
ALLOWED_FILE_EXTENSIONS=pdf,doc,docx,xls,xlsx,png,jpg,jpeg,gif
UPLOAD_FOLDER=uploads
BACKUP_FOLDER=backups

# =============================================================================
# API RATE LIMITING
# =============================================================================

# Rate limiting configuration
RATE_LIMIT_PER_MINUTE=60
RATE_LIMIT_PER_HOUR=1000
RATE_LIMIT_PER_DAY=10000
RATE_LIMIT_BURST=10

# =============================================================================
# MAINTENANCE MODE
# =============================================================================

# Maintenance mode settings
MAINTENANCE_MODE=false
MAINTENANCE_MESSAGE=System is under maintenance. Please try again later.
MAINTENANCE_ALLOW_ADMIN=false  # Allow admin access during maintenance

# =============================================================================
# DEVELOPMENT SETTINGS
# =============================================================================

# Development-specific settings
DEBUG=true
DEBUG_SQL=false
DEBUG_REQUEST_BODY=false
DEBUG_RESPONSE_BODY=false

# Hot reload for development
HOT_RELOAD=true

# =============================================================================
# TESTING SETTINGS
# =============================================================================

# Test database URL (used during testing)
TEST_DATABASE_URL=sqlite:///./test_tolkar_factory.db

# Test user credentials (for automated testing)
TEST_ADMIN_USERNAME=test_admin
TEST_ADMIN_PASSWORD=test_admin_password
TEST_ADMIN_EMAIL=test_admin@tolkar.local

TEST_SUPERVISOR_USERNAME=test_supervisor
TEST_SUPERVISOR_PASSWORD=test_supervisor_password
TEST_SUPERVISOR_EMAIL=test_supervisor@tolkar.local

TEST_OPERATOR_USERNAME=test_operator
TEST_OPERATOR_PASSWORD=test_operator_password
TEST_OPERATOR_EMAIL=test_operator@tolkar.local

# =============================================================================
# LEGACY SETTINGS (For backward compatibility)
# =============================================================================

# Legacy database URLs (will be converted to new format)
SQLITE_DB_PATH=./tolkar_factory.db
POSTGRES_HOST=localhost
POSTGRES_PORT=5432
POSTGRES_DB=tolkar_factory
POSTGRES_USER=username
POSTGRES_PASSWORD=password

# Legacy JWT settings
JWT_SECRET_KEY=${SECRET_KEY}
JWT_ACCESS_TOKEN_EXPIRES=${JWT_EXPIRATION_MINUTES}

# =============================================================================
# NOTES
# =============================================================================

# IMPORTANT: 
# 1. Copy this file to .env and update the values for your environment
# 2. Never commit the .env file to version control
# 3. Use environment-specific .env files (.env.production, .env.staging, etc.)
# 4. In production, use a proper secret management system
# 5. Regularly rotate secret keys and passwords
# 6. Enable all security features in production environment
# 7. Configure proper CORS origins for production
# 8. Set up monitoring and alerting
# 9. Configure backup and disaster recovery
# 10. Test all settings before deploying to production